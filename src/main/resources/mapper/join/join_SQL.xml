<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
	작성자:Hwai
    작성일:23.12.19
	페이지:gather/join.com 카하하하하하
 -->
<mapper namespace="joinModal">

   <!-- 회원번호 채번-->
   <select id="getUserPK" resultType="hashmap" parameterType="hashmap" >
         <![CDATA[
        SELECT 'UR' ||TO_CHAR(SYSDATE, 'YYMM') ||LPAD(NVL(MAX(CAST(SUBSTR(USER_NUMB,7,4) AS NUMBER))+1,1),4,'0') AS USER_NUMB  --회원번호 채번
		  FROM TM_USERXM
		 WHERE SUBSTR(USER_NUMB,3,4) = TO_CHAR(SYSDATE, 'YYMM')
         ]]>
   </select>

	   <!-- 회원가입 -->
	   <insert id="joinUs" parameterType="hashmap" useGeneratedKeys="true" keyProperty="USER_NUMB">
	        <![CDATA[
	       INSERT INTO TM_USERXM (
					      USER_NUMB  <!-- 회원번호 -->
					    , USER_NAME  <!-- 회원이름 -->
					    , REGI_NUMB  <!-- 주민등록번호 7자리 -->
					    , USER_NICK  <!-- 닉네임 -->
					    , USER_IDXX  <!-- 아이디 -->
					    , PASS_WORD  <!-- 비밀번호 -->
					    , CELL_NUMB  <!-- 휴대폰번호 -->
					    , FILE_SVNM  <!-- 프로필사진 -->
					    , SELF_INTR  <!-- 자기소개 -->
					    , DONG_CODE  <!-- 시군구코드 -->
					    , REGI_DATE  <!-- 가입일 -->
					    , QUST_CODE  <!-- 회원가입시 받는 질문코드 -->
					    , ANSR_CODE  <!-- 질문에 대한 답 -->
					    , BANN_DATE  <!-- 정지일 -->
			) VALUES (
					      #{USER_NUMB}  <!-- 회원번호 -->
					    , #{USER_NAME}  <!-- 회원이름 -->
					    , #{REGI_NUMB}  <!-- 주민등록번호 7자리 -->
					    , #{USER_NICK}  <!-- 닉네임 -->
					    , #{USER_IDXX}  <!-- 아이디 -->
					    , #{PASS_WORD}  <!-- 비밀번호 -->
					    , #{CELL_NUMB}  <!-- 휴대폰번호 -->
					    , #{FILE_SVNM}  <!-- 프로필사진 -->
					    , #{SELF_INTR}  <!-- 자기소개 -->
					    , #{DONG_CODE}  <!-- 시군구코드 -->
					    , SYSDATE       <!-- 가입일 -->
					    , #{QUST_CODE}  <!-- 회원가입시 받는 질문코드 -->
					    , #{ANSR_CODE}  <!-- 질문에 대한 답 -->
					    , NULL          <!-- 정지일 -->
					   )
	            ]]>
	   </insert>

   <select id= "" parameterType="hashmap"
      resultType="hashmap">
     
    
   </select>
  
</mapper>